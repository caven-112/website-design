<!DOCTYPE html>

<html>
    <head>
        <title>Profile</title>
        <link rel="stylesheet" href="base.css">
        <link rel="stylesheet" href="components.css">
        <link rel="stylesheet" href="custom.css">
    </head>
    

    <script>
        document.addEventListener('DOMContentLoaded', () => {
    
            document.body.classList.add('default-theme');
            const buttonList = document.querySelector('#button-list');


            if (buttonList) {
                buttonList.classList.add('default-theme');
            }

            document.querySelectorAll('button').forEach(button => {
                button.addEventListener('click', handleButtonClick);
            });

            document.getElementById('change-user-btn').addEventListener('click', changeUser);
        });




        function handleButtonClick(event) {
            const button = event.target;
            const page = button.getAttribute('data-page');
            const theme = document.querySelector('#trigger-theme-change');

            if (page) {
                showPage(page);
            };

            if (button.id === 'trigger-theme-change') {
                toggleTheme();
            }
        }


        function showPage(pageId) {
            const divs = document.querySelectorAll('div[id]:not(#button-list)');
    
            divs.forEach(div => div.style.display = 'none');
    
            const page = document.querySelector(`#${pageId}`);

            if (page) {
                page.style.display = 'block';
            }
        }


        function changeUser() {
            const userInput = document.getElementById('trigger-profile-change').value.trim();
            const errorMessage = document.getElementById('profile-error-message');
            const profiles = document.querySelectorAll('.profile-author-bio');        

            let found = false;

            profiles.forEach(profile => {
                const username = profile.getAttribute("data-username");

                if (username.toLowerCase() === userInput.toLowerCase()) {
                    profile.style.display = 'flex';
                    found = true;
                } else {
                    profile.style.display = 'none';
                }
            });

            if (!found) {
                errorMessage.style.display = 'block';
            } else {
                errorMessage.style.display = 'none';
            }
        }



        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
            document.body.classList.toggle('default-theme');

            const buttonList = document.querySelector('#button-list');
            if (buttonList) {
                buttonList.classList.toggle('dark-theme');
                buttonList.classList.toggle('default-theme');
            }

            document.querySelectorAll('#button-list button, .body-setting-page button').forEach(button => {
                button.classList.toggle('dark-theme');
                button.classList.toggle('default-theme');
            });
        }
    </script>

    <body class="transition">
        <div id="button-list">
            <ul id="navid">
                <li><button data-page="body-profile-page">Profile</button></li>
                <li><button data-page="body-media-page">Media Account</button></li>
                <li><button data-page="body-setting-page">Setting</button></li>
            </ul>
        </div>
        

        <!--Profile Page-->
        <div id="body-profile-page">

            <div data-username="Worcester" class="profile-author-bio profile-picture author1">
                <div class="profile-picture-style"></div>

                <div class="profile-author-information">
                    <h2 class="profile-author-name">Dean Conant Worcester</h2>

                    <div class="profile-author-description"> 
                        <p>I am here.</p>
                    </div>
                </div>
            </div>

            <div data-username="Moses" class="profile-author-bio profile-picture author2">
                <div class="profile-picture-style"></div>
                
                <div class="profile-author-information">
                    <h2 class="profile-author-name">Bernard Moses</h2>

                    <div class="profile-author-description"> 
                        <p>I am here</p>
                    </div>
                </div>
            </div>

            <div data-username="Tavera" class="profile-author-bio profile-picture author3">
                <div class="profile-picture-style"></div>
                
                <div class="profile-author-information">
                    <h2 class="profile-author-name">Trinidad Pardo de Tavera</h2>

                    <div class="profile-author-description"> 
                        <p>I am here</p>
                    </div>
                </div>
            </div>

            <div data-username="Ide" class="profile-author-bio profile-picture author4">
                <div class="profile-picture-style"></div>
                
                <div class="profile-author-information">
                    <h2 class="profile-author-name">Henry Clay Ide</h2>

                    <div class="profile-author-description"> 
                        <p>I am here</p>
                    </div>
                </div>
            </div>
        </div>

        <!--Social Media Page-->
        <div id="body-media-page">
            <div>Media Page</div>
            <div></div>
            <div></div>
            <div></div>
        </div>

        <!--Settings-->
        <div id="body-setting-page">
            <h1>Setting Page</h1>

            <div>
                <h2>Change Theme</h2>
                <button id="trigger-theme-change">Toggle Theme</button>
            </div>

            <div class="setting-button-list">
                <h2>Change Profile</h2>
                <input id="trigger-profile-change" name="profile" list="profiles" placeholder="Select or type your Username">
                        <datalist id="profiles">
                            <option value="Worcester">
                            <option value="Moses">
                            <option value="Tavera">
                            <option value="Ide">
                        </datalist>
                        <button id="change-user-btn">Change User</button>
                        <div id="profile-error-message">Error: User doesn't exist!</div>
            </div>
        </div>
    </body>
</html>